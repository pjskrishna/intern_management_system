<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>User Details</title>
  <!-- Bootstrap CSS from CDN -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 20px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 20px;
    }

    th, td {
      border: 1px solid #ddd;
      padding: 8px;
      text-align: left;
    }

    th {
      background-color: #f2f2f2;
    }

    iframe {
      width: 100%;
      height: 300px;
    }
  </style>
</head>
<body class="bg-light">

	<!-- Include the header fragment -->
	<div th:replace="fragments/headerFragment :: header"></div>

	<!-- Include the aside fragment -->
	<div th:replace="fragments/asideFragment :: aside"></div>

<main id="main" class="main">
<div class="container mt-4">
    <div th:if="${intern.isPresent()}">
        <form action="ans" method="post">
            <table class="table table-bordered">
                <tr>
                    <th>First Name</th>
                    <td th:text="${intern.get().firstName}">John</td>
                </tr>
                <tr>
                    <th>Last Name</th>
                    <td th:text="${intern.get().lastName}">Doe</td>
                </tr>
                <tr>
                    <th>Contact No</th>
                    <td th:text="${intern.get().contactNo}">1234567890</td>
                </tr>
                <tr>
                    <th>Email ID</th>
                    <td th:text="${intern.get().email}">john.doe@example.com</td>
                </tr>
                <tr>
                    <th>College Name</th>
                    <td th:text="${intern.get().collegeName}">College A</td>
                </tr>
                <tr>
                    <th>Branch</th>
                    <td th:text="${intern.get().branch}">Branch A</td>
                </tr>
                <tr>
                    <th>Domain</th>
                    <td th:text="${intern.get().programmingLangName}">Branch A</td>
                </tr>
                <tr>
                    <th>College ID Image</th>
                    <td>
                        <iframe th:src="@{'/files/icard/' + ${intern.get().icardImage}}"
                                frameborder="0"></iframe>
                    </td>
                </tr>
                <tr>
                    <th>NOC Image</th>
                    <td>
                        <iframe th:src="@{'/files/noc/' + ${intern.get().nocPdf}}"
                                frameborder="0" width="100%" height="50%" style="border: none;"></iframe>
                    </td>
                </tr>
                <tr>
                    <th>Passport Size Image</th>
                    <td>
                        <iframe th:src="@{'/files/image/' + ${intern.get().passportSizeImage}}"
                                frameborder="0"></iframe>
                    </td>
                </tr>
                <tr>
                    <th>Resume</th>
                    <td>
                        <iframe th:src="@{'/files/resume/' + ${intern.get().resumePdf}}"
                                frameborder="0"></iframe>
                    </td>
                </tr>
                <tr>
                    <th>Semester</th>
                    <td th:text="${intern.get().semester}">1</td>
                </tr>
                <tr>
                    <th>Final Status</th>
                    <td>
                        <select class="form-control" id="finalStatus" name="finalStatus" onchange="handleStatusChange()">
                            <option value="" selected disabled>Select Status</option>
                            <option value="passed">Passed</option>
                            <option value="failed">Failed</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <th>Reason</th>
                    <td>
                        <input type="text" id="message" name="message" placeholder="Enter reason for rejection"
                               class="form-control">
                    </td>
                </tr>
                <tr class="d-none">
                    <td><input id="internid" type="number" name="id" th:value="${intern.isPresent() ? intern.get().id : null}" hidden></td>
                </tr>
            </table>
            <div class="text-center mb-3">
            	<button id="mysubmitbutton" type="submit" class="btn btn-primary">
						<span class="spinner-border spinner-border-sm visually-hidden"
						role="status" aria-hidden="true"></span> <span
						class="visually-hidden">Loading...</span>Submit</button>
            </div>
        </form>
    </div>
    <div th:unless="${intern.isPresent()}">
        <!-- Handle the case when Optional is empty -->
        <p class="alert alert-danger">Intern not found</p>
    </div>
</div>

 <!-- Include the footer fragment -->
    <div th:replace="fragments/footerFragment :: footer"></div>
</main>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"
		integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+"
		crossorigin="anonymous"></script>



	<!-- Include Bootstrap JS -->
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"
		integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+"
		crossorigin="anonymous"></script>
    <script>
		$(document).ready(function() {
			// Initially hide the loading spinner
			$('.spinner-border').addClass('visually-hidden');

			$('form').submit(function() {
				// Show the loading spinner
				$('.spinner-border').removeClass('visually-hidden');

				// You can also perform additional actions or AJAX requests here

				// For demonstration purposes, let's simulate a delay
				setTimeout(function() {
					// After some delay, you may want to reset the loading spinner or perform other actions
					$('.spinner-border').addClass('visually-hidden');
				}, 200000); // Simulated delay of 2 seconds (adjust as needed)
			});
		});
	</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
</body>
</html>